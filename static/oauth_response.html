<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login</title>
    <style>
      * {
        margin: 0;
        padding: 0;
      }
      body {
        font-family: sans-serif;
        text-align: center;
        margin: 3rem;
      }
      .success,
      .error {
        display: none;
      }
      svg {
        height: 3rem;
      }
      .success svg {
        color: #008000;
      }
      .error svg {
        color: #c80000;
      }
      h1 {
        font-size: 3rem;
        margin: 1rem 0;
      }
      p {
        font-size: 1.5rem;
      }
    </style>
  </head>
  <body>
    <div class="success">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="currentColor"
        class="w-6 h-6"
      >
        <path
          fill-rule="evenodd"
          d="M12.516 2.17a.75.75 0 00-1.032 0 11.209 11.209 0 01-7.877 3.08.75.75 0 00-.722.515A12.74 12.74 0 002.25 9.75c0 5.942 4.064 10.933 9.563 12.348a.749.749 0 00.374 0c5.499-1.415 9.563-6.406 9.563-12.348 0-1.39-.223-2.73-.635-3.985a.75.75 0 00-.722-.516l-.143.001c-2.996 0-5.717-1.17-7.734-3.08zm3.094 8.016a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z"
          clip-rule="evenodd"
        />
      </svg>

      <h1>Login Success</h1>
      <p>You can close this tab and return to the app.</p>
    </div>
    <div class="error">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="currentColor"
        class="w-6 h-6"
      >
        <path
          fill-rule="evenodd"
          d="M11.484 2.17a.75.75 0 011.032 0 11.209 11.209 0 007.877 3.08.75.75 0 01.722.515 12.74 12.74 0 01.635 3.985c0 5.942-4.064 10.933-9.563 12.348a.749.749 0 01-.374 0C6.314 20.683 2.25 15.692 2.25 9.75c0-1.39.223-2.73.635-3.985a.75.75 0 01.722-.516l.143.001c2.996 0 5.718-1.17 7.734-3.08zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zM12 15a.75.75 0 00-.75.75v.008c0 .414.336.75.75.75h.008a.75.75 0 00.75-.75v-.008a.75.75 0 00-.75-.75H12z"
          clip-rule="evenodd"
        />
      </svg>

      <h1>Login Error</h1>
      <p id="error_description"></p>
    </div>

    <script>
      // Sample URLs:
      // oauth_response.html?error=access_denied&error_description=user+cancelled+authorization&state=
      // oauth_response.html?code=liu_abc123&state=

      const urlParams = new URLSearchParams(window.location.search)

      if (urlParams.has('error')) {
        document.title = 'Login Error'
        document.querySelector('.error').style.display = 'block'
        document.querySelector('#error_description').innerText =
          urlParams.get('error') + ': ' + urlParams.get('error_description')
      } else {
        document.title = 'Login Success'
        document.querySelector('.success').style.display = 'block'
      }
    </script>
  </body>
</html>
